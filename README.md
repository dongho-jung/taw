# PAW (Parallel AI Workers)

[![CI](https://github.com/dongho-jung/paw/actions/workflows/ci.yml/badge.svg)](https://github.com/dongho-jung/paw/actions/workflows/ci.yml)
[![Release](https://github.com/dongho-jung/paw/actions/workflows/release.yml/badge.svg)](https://github.com/dongho-jung/paw/actions/workflows/release.yml)

A project management system built on Claude Code.

## Installation

```bash
brew install dongho-jung/tap/paw
```

## Overview

- Start a tmux-based workspace from any directory with the `paw` command.
- Creating a task automatically launches the Claude Code agent.
- **Git mode**: Each task gets its own worktree when running in a git repo.
- **Non-Git mode**: Works without git; tasks run in the project directory.

## Usage

### Start paw in a project

```bash
cd /path/to/your/project  # git repo or regular directory
paw  # Creates .paw, starts tmux session, and automatically runs new-task
```

- In a git repo: Git mode (worktree created per task)
- In a regular directory: Non-Git mode (works directly in the project directory)

The first launch automatically opens the task editor.

### Create a task

To add another task inside the tmux session, press `‚åÉN`:
- The inline task input UI opens in the `_` window.
- Submit with `Alt+Enter` (or `F5`) to launch the agent; `Esc` cancels.
- Use `‚å•Tab` to edit per-task options (model, ultrathink, dependencies, worktree hook) before submitting.

### Slash Commands

Slash commands available to the agent:

| Command | Description |
|---------|-------------|
| `/commit` | Smart commit (analyzes the diff and generates a message) |
| `/test` | Detects and runs project tests |
| `/pr` | Creates a PR and opens the browser |
| `/merge` | Merges the worktree branch into the current project branch |

**Task completion**:
- All modes: Press `‚åÉF` to finish; PAW handles commit/PR/merge/cleanup according to ON_COMPLETE

<details>
<summary>Automatically reopen incomplete tasks with session resume</summary>

If a task is left unfinished and the window or tmux session closes, the next `paw` run automatically reopens those task windows.

**Session Resume**: When reopening, Claude automatically continues the previous conversation session (using `claude --continue`), preserving the full conversation history and context. The agent continues exactly where it left off without restarting from scratch.
</details>

<details>
<summary>Automatically clean up merged tasks</summary>

Tasks merged externally (PR merge, direct branch merge, etc.) are cleaned up automatically when `paw` runs.
</details>

### Window states

- ‚≠êÔ∏è New task input window
- ü§ñ Working
- üí¨ Waiting (user input required)
- ‚úÖ Done
- ‚ö†Ô∏è Warning (merge failed, needs manual resolution)
- Status updates are automatic (wait watcher + Claude Code stop hook classification on exit).

## Configuration

### Initial setup

When you first run `paw`, the setup wizard appears:

```
üöÄ PAW Setup Wizard
Work Mode:
  1. worktree (Recommended) - Each task gets its own git worktree
  2. main - All tasks work on current branch

Select [1-2, default: 1]:

On Complete Action:
  1. confirm (Recommended) - Ask before each action
  2. auto-commit - Automatically commit changes
  3. auto-merge - Auto commit + merge + cleanup      (worktree mode only)
  4. auto-pr - Auto commit + create pull request     (worktree mode only)

Select [1-2 or 1-4, default: 1]:

‚úÖ Configuration saved!
   Work mode: worktree
   On complete: confirm
```

Settings are saved to `.paw/config`.

### Rerun setup

```bash
paw setup  # Rerun the setup wizard
```

<details>
<summary>Example config (.paw/config)</summary>

```
# PAW Configuration
# Generated by paw setup

# Work mode: worktree or main
# - worktree: Each task gets its own git worktree (recommended)
# - main: All tasks work on the current branch
work_mode: worktree

# On complete action: confirm, auto-commit, auto-merge, or auto-pr
# - confirm: Ask before each action (recommended)
# - auto-commit: Automatically commit changes
# - auto-merge: Auto commit + merge + cleanup + close window
# - auto-pr: Auto commit + create pull request
on_complete: confirm

# Hook to run after worktree creation (optional)
# Single line example: worktree_hook: npm install
# Multi-line example:
#   worktree_hook: |
#     npm install
#     npm run build

```
</details>

### Configuration options

| Setting | Option | Description |
|---------|--------|-------------|
| `work_mode` | `worktree` | Create a git worktree per task (isolated, recommended) |
|             | `main` | Work directly on the current branch (simple) |
| `on_complete` | `confirm` | Ask before each action (safe) |
|               | `auto-commit` | Auto commit (merge/PR are manual) |
|               | `auto-merge` | **Auto** commit + merge + clean up + close window (worktree mode only) |
|               | `auto-pr` | Auto commit + create PR (worktree mode only) |
| `worktree_hook` | (command) | Shell command(s) to run after worktree creation (e.g., `npm install`) |
| `notifications` | `slack.webhook`, `ntfy.topic`, `ntfy.server` | Optional external alerts via Slack webhook or ntfy.sh |

<details>
<summary>Other configuration</summary>

- System prompt: Embedded in binary (copied to `.paw/.claude/` on setup)
- `.paw/PROMPT.md`: Project-specific prompt (per project)
- `.paw/memory`: Project memory (YAML, update in place for reusable info)
- Slash commands: Embedded in binary (copied to `.paw/.claude/commands/` on setup)
- Notifications: Configure optional Slack/ntfy settings in `.paw/config`
</details>

## Dependencies

Use `paw check` to verify prerequisites.

| Dependency | Required | Purpose |
|------------|----------|---------|
| tmux | Yes | Terminal multiplexer for managing task windows |
| claude | Yes | Claude Code CLI for running agents |
| git | Optional | Needed for worktree mode in git repositories |
| gh | Optional | PR creation for `/pr` and `auto-pr` mode |
| paw-notify.app (macOS) | Optional | Desktop notifications and action buttons |

Install tmux/gh via Homebrew: `brew install tmux gh`. Install the Claude Code CLI from https://claude.ai/claude-code.

## tmux shortcuts

### Navigation
| Action | Shortcut |
|--------|----------|
| Cycle panes / task options (new task) | `‚å•Tab` |
| Move window | `‚å•‚Üê/‚Üí` |

### Task Commands
| Action | Shortcut |
|--------|----------|
| New task | `‚åÉN` |
| Cancel task (double-press) | `‚åÉK` |
| Finish task | `‚åÉF` |
| Branch menu (‚Üë merge, ‚Üì sync) | `‚åÉ]` |
| Quit paw | `‚åÉQ` |

### Toggle Panels
| Action | Shortcut |
|--------|----------|
| Toggle tasks | `‚åÉT` |
| Toggle logs | `‚åÉO` |
| Toggle git status | `‚åÉG` |
| Toggle bottom (shell) | `‚åÉB` |
| Toggle help | `‚åÉ/` |
| Toggle setup | `‚åÉ,` |

## Log viewer

Press `‚åÉO` to open the live log viewer.

<details>
<summary>Controls</summary>

| Key | Description |
|----|-------------|
| `‚Üë` / `‚Üì` | Scroll vertically |
| `‚Üê` / `‚Üí` | Scroll horizontally (when word wrap is off) |
| `g` | Jump to top |
| `G` | Jump to bottom |
| `PgUp` / `PgDn` | Page scroll |
| `s` | Toggle tail mode (follow new logs) |
| `w` | Toggle word wrap |
| `l` | Cycle log level filter (L0+ ‚Üí L1+ ‚Üí ... ‚Üí L5 only) |
| `q` / `Esc` | Close the log viewer |
</details>

## Task history

When a task ends, the full content of the agent pane is automatically captured and saved.

### Storage location

```
.paw/history/
‚îî‚îÄ‚îÄ YYMMDD_HHMMSS_task-name  # e.g., 241228_134501_my-feature
```

### Usage examples

- Review what the agent did in a past task.
- Trace how a problem was solved.
- Use as reference material for learning and improvement.
